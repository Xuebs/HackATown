<html>
  <head>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.6/p5.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.js"
            integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
            crossorigin="anonymous"></script>

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 90%;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        margin-top: 10%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 80%;
        margin: 0;
        padding: 0;
      }
    </style>


  </head>




  <body>

    <div id="map"></div>
    <script>
      var map;

      var url = "mtlwifi.json";

      var ilesansfil = "ilesansfil.json"


      function readData()
      {
        $.getJSON(url, parseData);
        $.getJSON(ilesansfil, parseDataIle);
      }  

      function parseData(data)
      {
          //console.log(data);
          //console.log('data succesfully read');

          var i, j;

          for(i= 0; i < data.features.length; i++)
          {
            //console.log(data.features[i].geometry.coordinates[1]);
            var coords = data.features[i].geometry.coordinates[1];
            var latLng = new google.maps.LatLng(coords[1],coords[0]);
            var marker = new google.maps.Marker({
              position: latLng,
              map: map
            });

          }

          //console.log('a total of ' + i + ' markers have been added');

          for(var j= 0; j < data.features.length; j++)
          {
            //console.log(data.features[i].geometry.coordinates[0]);
            var coords = data.features[j].geometry.coordinates[0];
            var latLng = new google.maps.LatLng(coords[1],coords[0]);
            var marker = new google.maps.Marker({
              position: latLng,
              map: map
            });

          }
          //console.log('a total of ' + j + ' markers have been added');


      }

      function parseDataIle (data)
      {
        //console.log(data[1].latitude);

        for (var i = 0; i < 276; i++)
        {
          var coords_lati = data[i].latitude;
          var coords_long = data[i].longitude;
          var latLng = new google.maps.LatLng(coords_lati,coords_long);
          var marker = new google.maps.Marker({
              position: latLng,
              map: map
            });
        }
      }

      readData();




      // function preload() 
      // {
      //   console.log('trying to read json');

      //   wifiData = JSON.parse(url.toString());
      //   console.log('url loadJSON');

      //   console.log(wifiData.features.geometry[1]);

      // }

      // function setup()
      // {
      //   noLoop();
      // }

      function initMap() 
      {
        map = new google.maps.Map(document.getElementById('map'), 
        {
          zoom: 10,
          center: new google.maps.LatLng(45.584010,-73.645850),
          // 45°30'6.81"N   73°33'58.50"W
          mapTypeId: 'hybrid'
        });




        // // Create a <script> tag and set the USGS URL as the source.
        // var script = document.createElement('script');
        // // This example uses a local copy of the GeoJSON stored at
        // // http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.geojsonp
        // script.src = 'http://donnees.ville.montreal.qc.ca/dataset/08f12925-c6b2-405f-bd01-744674d97bff/resource/11860f23-30c9-4221-ae00-a39af4684210/download/mtlwifi.json';

        // console.log('script loaded');


        // document.getElementsByTagName('features');
        // //map.panTo({lat: 45.536810, lng: -73.685850});
        // //map.setZoom(10);





      }



      // // Loop through the results array and place a marker for each
      // // set of coordinates.
      // window.mtlwifi = function(results) 
      // {
      //   console.log('code ran to here');
      //   for (var i = 0; i < results.features.length; i++) 
      //   {
      //       var coords = results.features[i].geometry.coordinates;
      //       var latLng = new google.maps.LatLng(coords[1],coords[0]);
      //       var marker = new google.maps.Marker({
      //         position: latLng,
      //         map: map
      //       });


      //       console.log(coords);
      //   }
      // }




    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBzutWzphfr56u9zGHoLgtYc0MDuZaLBhY&callback=initMap">
    </script>



  </body>




</html>